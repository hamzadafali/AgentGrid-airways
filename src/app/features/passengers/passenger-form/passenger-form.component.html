<form [formGroup]="passengerForm" (ngSubmit)="onSubmit()">
  @if (existingPassenger) {
    <div class="info-message">
      <mat-icon>info</mat-icon>
      <span>Passager existant trouvé - Les informations ont été préremplies</span>
    </div>
  }

  <div class="grid cols-2">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Prénom</mat-label>
      <input matInput formControlName="firstName" placeholder="Jean">
      @if (passengerForm.get('firstName')?.hasError('required') && passengerForm.get('firstName')?.touched) {
        <mat-error>Le prénom est requis</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Nom</mat-label>
      <input matInput formControlName="lastName" placeholder="Dupont">
      @if (passengerForm.get('lastName')?.hasError('required') && passengerForm.get('lastName')?.touched) {
        <mat-error>Le nom est requis</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Email</mat-label>
      <input matInput type="email" formControlName="email" placeholder="jean.dupont@example.com">
      <mat-icon matPrefix>email</mat-icon>
      @if (passengerForm.get('email')?.hasError('required') && passengerForm.get('email')?.touched) {
        <mat-error>L'email est requis</mat-error>
      }
      @if (passengerForm.get('email')?.hasError('email')) {
        <mat-error>Email invalide</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Téléphone</mat-label>
      <input matInput formControlName="phoneNumber" placeholder="+33 6 12 34 56 78">
      <mat-icon matPrefix>phone</mat-icon>
      @if (passengerForm.get('phoneNumber')?.hasError('required') && passengerForm.get('phoneNumber')?.touched) {
        <mat-error>Le téléphone est requis</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Numéro de passeport</mat-label>
      <input matInput formControlName="passportNumber" placeholder="12AB34567">
      <mat-icon matPrefix>badge</mat-icon>
      @if (passengerForm.get('passportNumber')?.hasError('required') && passengerForm.get('passportNumber')?.touched) {
        <mat-error>Le numéro de passeport est requis</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Date de naissance</mat-label>
      <input matInput [matDatepicker]="dobPicker" formControlName="dateOfBirth">
      <mat-datepicker-toggle matSuffix [for]="dobPicker"></mat-datepicker-toggle>
      <mat-datepicker #dobPicker></mat-datepicker>
      @if (passengerForm.get('dateOfBirth')?.hasError('required') && passengerForm.get('dateOfBirth')?.touched) {
        <mat-error>La date de naissance est requise</mat-error>
      }
    </mat-form-field>
  </div>

  <div class="actions">
    <button mat-raised-button color="primary" type="submit" [disabled]="!passengerForm.valid">
      @if (existingPassenger) {
        Utiliser ce passager
      } @else {
        Créer le passager
      }
    </button>
  </div>
</form>
